<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Campus Facilities â€” Facilica</title>
    <style>
      :root{--teal:#0ea5a4;--blue:#176b86;--light:#dff7f8;--muted:#e6fbfb;--deep:#0b6b86}
      html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;color:#0b2b2d}
      header{background:#cffff6;padding:26px 22px 18px;display:flex;align-items:center;justify-content:space-between}
      .brand img{height:78px}
      .title{flex:1;text-align:center}
      .title h1{margin:0;font-size:42px;color:var(--deep);letter-spacing:2px;font-weight:800}
      .title p{margin:6px 0 0;color:#5fb3c1;font-size:18px}
      .crest img{height:72px;border-radius:50%}
      main{padding:36px 24px 140px;background:white;min-height:calc(100% - 220px)}
      .panel{background:#e6f6f6;padding:28px 34px;border-radius:4px;max-width:920px;margin:60px auto;min-height:220px;display:flex;flex-direction:column}
      .steps{display:flex;gap:28px;color:#0b6b86;font-weight:600;margin-bottom:22px;align-items:flex-end}
      .step{position:relative;padding-bottom:8px;color:#0b6b86;opacity:0.6}
      .step.active{opacity:1;color:#0b6b86}
      .step.active::after{content:'';position:absolute;left:0;right:0;bottom:-6px;height:8px;background:#03753a;border-radius:6px}
      #facility-dropdown{display:flex;gap:22px;align-items:flex-start}
      #facility-menu button{background:white;border:1px solid rgba(0,0,0,0.06);padding:8px 10px;border-radius:6px;text-align:left}
      #preview-img{width:100%;max-width:520px;border-radius:6px;box-shadow:0 6px 18px rgba(2,31,37,0.06)}
      .panel-footer{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:10px;padding-top:18px}
      .footer-left, .footer-right{display:flex;gap:10px;align-items:center}
      .btn{min-width:120px;height:40px;display:inline-flex;align-items:center;justify-content:center;padding:0 16px;border-radius:12px;font-weight:700;letter-spacing:0.6px;border:none}
      .btn-primary, .next-btn{background:#0b6b2f;color:white}
      .btn.secondary{background:transparent;border:1px solid rgba(0,0,0,0.06);color:#034047}
      .res-fields input{background:white;border-radius:10px;padding:10px 12px;border:none;box-shadow:none;border:1px solid rgba(0,0,0,0.06);min-width:140px}
      .time-sep{display:inline-flex;align-items:center;color:#0b6b86;font-weight:700;padding:0 6px}
      footer.sitebar{position:fixed;left:0;right:0;bottom:0;height:80px;background:#176b86}
      .hidden{display:none}
      .validate-table-wrapper {
        width: 100%;
        display: flex;
        justify-content: center;
      }
      .validate-table {
        width: 90%;
        max-width: 950px;
        margin: 30px auto 24px auto;
        background: white;
        border: 6px solid #53b6be;
        border-radius: 10px;
        box-shadow: 0 2px 13px rgba(0,100,91,0.04);
        overflow: hidden;
      }
      .validate-table th {
        background: #176b86;
        color: white;
        font-size: 16px;
        font-weight: 600;
        padding: 13px 10px;
      }
      .validate-table td {
        background: white;
        font-size: 16px;
        padding: 10px 10px;
        text-align: center;
      }
      .editable[contenteditable="true"] {
        outline: 1.5px solid #ea8;
        background: #f4fbe8;
      }
      .validate-avatar { width: 28px; height: 28px; border-radius: 50%; border:1.5px solid #ccc; object-fit:cover;}
    </style>
  </head>
  <body>
    <header>
      <div class="brand"><img src="facilica.img.png" alt="Facilica logo"></div>
      <div class="title"><h1>Campus Facilities</h1><p>Reserve rooms and spaces easily</p></div>
      <div class="crest"><img src="pcc.img.png" alt="Crest"></div>
    </header>

    <main>
      <section class="panel" role="region" aria-label="Reservation panel">
        <div class="steps">
          <div class="step active">1. Facility</div>
          <div class="step">2. Reservation</div>
          <div class="step">3. Availability</div>
          <div class="step">4. Details</div>
          <div class="step">5. Validate</div>
        </div>
       
        <div id="step-1">
          <div id="facility-dropdown" style="display:flex;gap:18px;align-items:flex-start">
            <div style="flex:0 0 180px">
              <label for="facility-select" class="hidden" style="position:absolute;left:-9999px">Select facility</label>
              <select id="facility-select" style="min-width:160px;padding:8px 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:white">
                <option value="">Select</option>
                <option value="Aula Minor">Aula Minor</option>
                <option value="Crown Jewel">Crown Jewel</option>
                <option value="Gymnasium">Gymnasium</option>
              </select>
            </div>
            <div style="flex:1;display:flex;gap:24px;align-items:flex-start">
              <div style="flex:0 0 320px">
                <div id="preview-wrap" style="width:100%;max-width:520px;">
                  <img id="preview-img" src="" alt="Preview" style="display:none;width:100%;height:auto;border-radius:6px;box-shadow:0 6px 18px rgba(2,31,37,0.06)">
                  <div id="preview-placeholder" style="display:flex;align-items:center;justify-content:center;width:100%;height:180px;background:transparent;color:#08333a;font-weight:600;border-radius:6px">Please select facility</div>
                </div>
              </div>
              <div id="preview-desc" style="flex:1;color:#08333a;font-size:16px;line-height:1.6;padding-top:6px">
                <h3 id="desc-title" style="margin:0 0 10px 0;color:#08333a;font-weight:700"></h3>
                <p id="desc-text" style="margin:0;color:#0b2b2d;opacity:0.9"></p>
              </div>
            </div>
          </div>
        </div>
       
        <div id="step-2" class="hidden" style="margin-top:18px">
          <div class="res-fields" style="display:flex;gap:18px;align-items:center;justify-content:flex-start">
            <input id="res-date" type="date" placeholder="YYYY-MM-DD">
            <input id="res-time-from" type="time" placeholder="Time">
            <span class="time-sep">to</span>
            <input id="res-time-to" type="time" placeholder="Time">
            <input id="res-purpose" type="text" placeholder="Purpose" style="min-width:220px">
          </div>
        </div>
     
        <div id="step-3" class="hidden" style="margin-top:18px;">
          <div style="display:flex;gap:36px;align-items:flex-start;justify-content:flex-start;">
            <div style="flex:2;">
              <table style="width:100%;background:white;border:1.5px solid #b5cacc;border-radius:8px;box-shadow:0 2px 13px rgba(0,60,51,.05);overflow:hidden;">
                <thead>
                  <tr style="background:#eef9f5;color:#176b86;font-weight:600;text-align:left;font-size:15.5px">
                    <th style="padding:10px 18px;">Name</th>
                    <th style="padding:10px 15px;">Location</th>
                    <th style="padding:10px 15px;">Time &amp; Date</th>
                    <th style="padding:10px 15px;">Status</th>
                  </tr>
                </thead>
                <tbody style="font-size:16px;color:#134860">
                  <tr>
                    <td style="padding:10px 18px;display:flex;align-items:center;gap:9px;">
                      <img src="aula.img.jpg" alt="Aula Minor" style="width:28px;height:28px;border-radius:50%;object-fit:cover;border:1px solid #e5e8ee;">
                      Aula Minor
                    </td>
                    <td style="padding:10px 15px;">6th Floor</td>
                    <td style="padding:10px 15px;">October 30, 2025 10:01 a.m</td>
                    <td style="padding:10px 15px;">Pending</td>
                  </tr>
                  <tr>
                    <td style="padding:10px 18px;display:flex;align-items:center;gap:9px;">
                      <img src="gym.img.jpg" alt="Gymnasium" style="width:28px;height:28px;border-radius:50%;object-fit:cover;border:1px solid #e5e8ee;">
                      Gymnasium
                    </td>
                    <td style="padding:10px 15px;">6th Floor</td>
                    <td style="padding:10px 15px;">October 30, 2025 10:01 a.m</td>
                    <td style="padding:10px 15px;">Pending</td>
                  </tr>
                  <tr>
                    <td style="padding:10px 18px;display:flex;align-items:center;gap:9px;">
                      <img src="crown.img.jpg" alt="Crown Jewel" style="width:28px;height:28px;border-radius:50%;object-fit:cover;border:1px solid #e5e8ee;">
                      Crown Jewel
                    </td>
                    <td style="padding:10px 15px;">Grounds</td>
                    <td style="padding:10px 15px;">October 30, 2025 10:01 a.m</td>
                    <td style="padding:10px 15px;">Pending</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div style="flex:1;">
              <div style="background:#e6f6f6;padding:18px;border-radius:8px;width:210px;box-shadow:0 2px 13px rgba(0,100,91,0.04);margin-bottom:24px;">
                <div style="font-weight:600;color:#176b86;height:22px;margin-bottom:8px;">Calendar</div>
                <div style="display:flex;justify-content:center;align-items:center;">
                  <table style="width:100%;color:#3a4d55;font-size:15.5px;text-align:center;border-collapse:separate; border-spacing: 3px;">
                    <thead>
                      <tr style="color:#858aab;font-size:14.2px;">
                        <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td style="background:transparent;">5</td>
                        <td style="background:#bbedde;font-weight:700;border-radius:6px;">6</td>
                        <td>7</td><td>8</td><td>9</td><td>10</td><td>11</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
       
        <div id="step-4" class="hidden" style="margin-top:18px;">
          <div style="display:flex;flex-direction:column;align-items:center;">
            <div style="width:100%;max-width:820px;display:flex;justify-content:center;gap:32px;margin:30px 0 58px 0;">
              <input id="details-fullname" type="text" placeholder="Full Name"
                style="padding:12px 18px;border-radius:8px;border:1px solid #dce7eb;font-size:17px;background:#f7fafc;width:230px;outline:none;">
              <input id="details-course" type="text" placeholder="Course"
                style="padding:12px 18px;border-radius:8px;border:1px solid #dce7eb;font-size:17px;background:#f7fafc;width:230px;outline:none;">
              <input id="details-email" type="email" placeholder="Email"
                style="padding:12px 18px;border-radius:8px;border:1px solid #dce7eb;font-size:17px;background:#f7fafc;width:230px;outline:none;">
            </div>
          </div>
        </div>

       
        <div id="step-5" class="hidden" style="margin-top:18px;">
          <div class="validate-table-wrapper" style="display:flex;flex-direction:column;align-items:center;">
            <table id="validate-table" class="validate-table">
              <thead>
                <tr>
                  <th>Facility &#8595;</th>
                  <th>Name &#8595;</th>
                  <th>Email &#8595;</th>
                  <th>Course &#8595;</th>
                  <th>Time &amp; Date &#8595;</th>
                  <th>Purpose &#8595;</th>
                  <th>Status &#8595;</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="editable" data-key="facility"></td>
                  <td class="editable" data-key="name" style="display:flex;align-items:center;gap:8px;justify-content:center;">
                    <img id="validate-avatar" class="validate-avatar" src="user1.jpg" alt="Avatar">
                    <span id="validate-name" class="editable" data-key="nameText" contenteditable="true"></span>
                  </td>
                  <td id="validate-email" class="editable" data-key="email" contenteditable="true"></td>
                  <td id="validate-course" class="editable" data-key="course" contenteditable="true"></td>
                  <td id="validate-datetime" class="editable" data-key="datetime" contenteditable="true"></td>
                  <td id="validate-purpose" class="editable" data-key="purpose" contenteditable="true"></td>
                  <td id="validate-status" class="editable" data-key="status" contenteditable="false" style="color:green;font-weight:600;">Booked</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="panel-footer">
          <div class="footer-left"><button id="back-btn" class="btn btn-primary">Back</button></div>
          <div class="footer-right"><button id="confirm-btn" class="btn next-btn" style="display:none">NEXT</button><button id="next-btn" class="btn next-btn">NEXT</button></div>
        </div>
      </section>
    </main>
    <footer class="sitebar" aria-hidden="true"></footer>

    <script>
      document.addEventListener('DOMContentLoaded', ()=>{
        const facilitySelect = document.getElementById('facility-select');
        const previewImg = document.getElementById('preview-img');
        const previewPlaceholder = document.getElementById('preview-placeholder');
        const stepEls = Array.from(document.querySelectorAll('.steps .step'));
        const step1 = document.getElementById('step-1');
        const step2 = document.getElementById('step-2');
        const step3 = document.getElementById('step-3');
        const step4 = document.getElementById('step-4');
        const step5 = document.getElementById('step-5');
        const nextBtn = document.getElementById('next-btn');
        const backBtn = document.getElementById('back-btn');
        const confirmBtn = document.getElementById('confirm-btn');
        const resDate = document.getElementById('res-date');
        const resFrom = document.getElementById('res-time-from');
        const resTo = document.getElementById('res-time-to');
        const resPurpose = document.getElementById('res-purpose');
        const descTitle = document.getElementById('desc-title');
        const descText = document.getElementById('desc-text');
        const detailsFullname = document.getElementById('details-fullname');
        const detailsCourse = document.getElementById('details-course');
        const detailsEmail = document.getElementById('details-email');

      
        const facilities = {
          'Aula Minor': 'aula.img.jpg',
          'Crown Jewel': 'crown.img.jpg',
          'Gymnasium': 'gym.img.jpg'
        };

        const facilityDescriptions = {
          'Aula Minor': {
            title: 'Aula Minor',
            text: 'A mid-sized indoor hall suitable for meetings, training sessions, and school activities, equipped with audio-visual facilities for an efficient event experience.'
          },
          'Crown Jewel': {
            title: 'Crown Jewel',
            text: 'A premier multi-purpose hall ideal for ceremonies, seminars, and large school events, equipped with stage and sound facilities.'
          },
          'Gymnasium': {
            title: 'Gymnasium',
            text: 'A fully covered gymnasium perfect for sports activities, physical education classes, and large assemblies.'
          }
        };

        function createFilenameCandidates(name){
          const exact = facilities[name] || name;
          const c = [exact, encodeURI(exact)];
          const simple = exact.toLowerCase();
          c.push(simple.replace(/\s+/g,'-'));
          c.push(simple.replace(/\s+/g,'_'));
          c.push(simple.replace(/\s+/g,''));
          return Array.from(new Set(c));
        }

        function makePlaceholder(name){
          const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='520' height='320'><rect width='100%' height='100%' fill='%23e9f6f6'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%230b2b2d' font-family='Arial' font-size='28'>${name}</text></svg>`;
          return 'data:image/svg+xml;charset=utf-8,'+encodeURIComponent(svg);
        }

        function trySetImage(img, candidates){
          return new Promise(resolve=>{
            let i=0;
            function next(){
              if(i>=candidates.length){ img.src = makePlaceholder('No image'); return resolve(false); }
              const s=candidates[i++];
              img.onload = ()=>{ resolve(true); };
              img.onerror = ()=>{ next(); };
              img.src = s;
            }
            next();
          });
        }

        async function setPreview(name){ 
          const ok = await trySetImage(previewImg, createFilenameCandidates(name)); 
          if(ok){ previewImg.style.display='block'; if(previewPlaceholder) previewPlaceholder.style.display='none'; }
          else { previewImg.style.display='none'; if(previewPlaceholder) previewPlaceholder.style.display='flex'; }
          const d = facilityDescriptions[name];
          if(d){ descTitle.textContent = d.title; descText.textContent = d.text; }
          else { descTitle.textContent=''; descText.textContent=''; }
        }

        facilitySelect.addEventListener('change', ()=>{
          const name = facilitySelect.value;
          if(name){ setPreview(name); }
        });

     
        function populateValidateSummary() {
          const facility = facilitySelect.value || "Aula Minor";
          const name = (detailsFullname?.value || "Jessica Miranda");
          const email = (detailsEmail?.value || "jessica@example.com");
          const course = (detailsCourse?.value || "BSIT");
          const purpose = (resPurpose?.value || "Seminar");
          const status = "Booked";
          const date = resDate?.value || "";
          const from = resFrom?.value || "";
          const to = resTo?.value || "";
          let datetimeDisplay = "";
          if (date && from && to) {
            const dateObj = new Date(date);
            const y = dateObj.getFullYear(), m = dateObj.toLocaleString('default',{month:'long'}), d=dateObj.getDate();
            const timeFrom = from.length>0 ? new Date(`1970-01-01T${from}:00`).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : "";
            const timeTo = to.length>0 ? new Date(`1970-01-01T${to}:00`).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : "";
            datetimeDisplay = `${m} ${d}, ${y} ${timeFrom} am-${timeTo}pm`;
          } else {
            datetimeDisplay = "N/A";
          }

      
          document.querySelector('#validate-table td[data-key="facility"]').textContent = facility;
          document.querySelector('#validate-name').textContent = name;
          document.getElementById('validate-avatar').src = "user1.jpg"; 
          document.getElementById('validate-email').textContent = email;
          document.getElementById('validate-course').textContent = course;
          document.getElementById('validate-datetime').textContent = datetimeDisplay;
          document.getElementById('validate-purpose').textContent = purpose;
          document.getElementById('validate-status').textContent = status;
        }

        let currentStep = 1;
        function setActiveStep(n){ 
          currentStep = n; 
          step1.classList.toggle('hidden', n!==1); 
          step2.classList.toggle('hidden', n!==2); 
          step3.classList.toggle('hidden', n!==3); 
          step4.classList.toggle('hidden', n!==4);
          step5.classList.toggle('hidden', n!==5);
          stepEls.forEach((el,idx)=>{
            if(idx+1<=n) el.classList.add('active');
            else el.classList.remove('active');
          });
          if(n===1){
            backBtn.style.display='none'; nextBtn.style.display='inline-block'; confirmBtn.style.display='none';
          } else if(n===2){
            backBtn.style.display='inline-block'; nextBtn.style.display='none'; confirmBtn.style.display='inline-block';
          } else if(n===3){
            backBtn.style.display='inline-block'; nextBtn.style.display='inline-block'; confirmBtn.style.display='none';
          } else if(n===4){
            backBtn.style.display='inline-block'; nextBtn.style.display='inline-block'; confirmBtn.style.display='none';
          } else if(n===5){
            backBtn.style.display='inline-block'; nextBtn.style.display='none'; confirmBtn.style.display='inline-block';
            confirmBtn.textContent = "SUBMIT";
            populateValidateSummary();
           
            document.querySelectorAll('#validate-table .editable').forEach(td => {
              td.setAttribute("contenteditable", td.dataset.key !== 'facility' && td.dataset.key !== 'status' ? "true" : "false");
              td.addEventListener('focus', function(e){
                this.style.background = "#fafdcf";
              });
              td.addEventListener('blur', function(e){
                this.style.background = "";
              });
            });
          }
        }

        nextBtn.addEventListener('click', ()=>{
          if(currentStep===1){
            const selected = facilitySelect.value;
            if(!selected || selected===''){ alert('Please select a facility first'); return; }
            setActiveStep(2);
          } else if(currentStep===2) {
            setActiveStep(3);
          } else if(currentStep===3){
            setActiveStep(4);
          } else if(currentStep===4) {
            setActiveStep(5);
          }
        });
        backBtn.addEventListener('click', ()=>{
          if(currentStep===2) setActiveStep(1);
          else if(currentStep===3) setActiveStep(2);
          else if(currentStep===4) setActiveStep(3);
          else if(currentStep===5) setActiveStep(4);
          else setActiveStep(1);
        });

        confirmBtn.addEventListener('click', ()=>{
          if(currentStep===2){
            const date=resDate.value, from=resFrom.value, to=resTo.value, purpose=resPurpose.value, facility=facilitySelect.value;
            if(!date){ alert('Please select a date'); return; }
            if(!from||!to){ alert('Please select start and end time'); return; }
            if(to<=from){ alert('End time must be after start time'); return; }
            setActiveStep(3);
          } else if(currentStep===5){
         
            const facility = document.querySelector('#validate-table td[data-key="facility"]').textContent;
            const name = document.getElementById('validate-name').textContent;
            const email = document.getElementById('validate-email').textContent;
            const course = document.getElementById('validate-course').textContent;
            const datetime = document.getElementById('validate-datetime').textContent;
            const purpose = document.getElementById('validate-purpose').textContent;
            const status = document.getElementById('validate-status').textContent;
            alert(`Submitted!\n${facility}, ${name}, ${email}, ${course}, ${datetime}, ${purpose}, ${status}`);
          }
        });

        if(previewImg) previewImg.style.display = 'none';
        if(previewPlaceholder) previewPlaceholder.style.display = 'flex';
        descTitle.textContent = '';
        descText.textContent = '';

        setActiveStep(1);
      });
    </script>
  </body>
</html>